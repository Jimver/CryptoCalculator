addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable
language: node_js
nodejs:
  - "node"
  - "lts/*"
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
install:
  - npm install
script:
  - npm run lint
  - npm run build
  - npm run coverage
  - npm run e2e
  - ng build --prod --base-href CryptoCalculator

after_success:
  - codecov

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GH_PAGES_TOKEN
  local_dir: ${TRAVIS_BUILD_DIR}/dist
  fqdn: cryptocalculator.jimver.nl
  on:
    branch:
      master
